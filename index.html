<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Query terrain elevation</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<script src="https://unpkg.com/@turf/turf@6/turf.min.js"></script>
<div id="map"></div>
<script>
	// TO MAKE THE MAP APPEAR YOU MUST
	// ADD YOUR ACCESS TOKEN FROM
	// https://account.mapbox.com
	mapboxgl.accessToken = 'pk.eyJ1IjoiYnJob2xtZXMxMCIsImEiOiJzRG9nY3JrIn0.dsqKQYo38X9n5NlIhPEsGA';
    (async () => {
        const map = new mapboxgl.Map({
            container: 'map',
            zoom: 15.5,
            // center: [6.58968, 45.39701],
            center: [-113.30132927675068, 37.136856789021856],
            pitch: 76,
            bearing: 125,
            // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
            style: 'mapbox://styles/mapbox/satellite-streets-v12',
            interactive: false,
            hash: false
        });

        const pinRouteGeojson = {
            "type": "FeatureCollection",
            "features": [
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "LineString",
                        "coordinates": [
                        [
                            -113.30095931737868,
                            37.136790292293995,
                            0
                        ],
                        [
                            -113.3009218378684,
                            37.1368161862535,
                            0
                        ],
                        [
                            -113.30089185479918,
                            37.136838097070886,
                            0
                        ],
                        [
                            -113.30086062217336,
                            37.13685204018477,
                            0
                        ],
                        [
                            -113.30083813464685,
                            37.136875943273566,
                            0
                        ],
                        [
                            -113.3008168957786,
                            37.1369018379199,
                            0
                        ],
                        [
                            -113.30079440825209,
                            37.13692673641713,
                            0
                        ],
                        [
                            -113.3007719207256,
                            37.136963585719634,
                            0
                        ],
                        [
                            -113.30074568542771,
                            37.136993464177394,
                            0
                        ],
                        [
                            -113.30072319790119,
                            37.13700740726264,
                            0
                        ],
                        [
                            -113.30065823353648,
                            37.13703031416353,
                            0
                        ],
                        [
                            -113.30061325848347,
                            37.137044257241996,
                            0
                        ],
                        [
                            -113.30057078254356,
                            37.137057204895505,
                            0
                        ],
                        [
                            -113.30053205347673,
                            37.13706915569235,
                            0
                        ],
                        [
                            -113.3005108155068,
                            37.13708210334161,
                            0
                        ],
                        [
                            -113.30047583510961,
                            37.13709305871256,
                            0
                        ],
                        [
                            -113.3004396051559,
                            37.13709405413452,
                            0
                        ],
                        [
                            -113.3004021256456,
                            37.137096046410576,
                            0
                        ],
                        [
                            -113.30037339123463,
                            37.137102021806136,
                            0
                        ],
                        [
                            -113.30034715593675,
                            37.13710998947692,
                            0
                        ],
                        [
                            -113.30032841618161,
                            37.13711795714686,
                            0
                        ],
                        [
                            -113.30031217553959,
                            37.13712791637504,
                            0
                        ],
                        [
                            -113.3002996826689,
                            37.13713488790565,
                            0
                        ],
                        [
                            -113.30028718889994,
                            37.13714883096483,
                            0
                        ],
                        [
                            -113.30027719514241,
                            37.13716974554885,
                            0
                        ],
                        [
                            -113.30024846073142,
                            37.13718667701214,
                            0
                        ],
                        [
                            -113.30017974859533,
                            37.13720759158569,
                            0
                        ],
                        [
                            -113.30013477354231,
                            37.13722452232437,
                            0
                        ],
                        [
                            -113.300064812748,
                            37.1372484245794,
                            0
                        ],
                        [
                            -113.30000109793984,
                            37.13726834371623,
                            0
                        ],
                        [
                            -113.2999511255589,
                            37.137280295195865,
                            0
                        ],
                        [
                            -113.29991114783381,
                            37.13728925826721,
                            0
                        ],
                        [
                            -113.29988990896555,
                            37.13728925826721,
                            0
                        ],
                        [
                            -113.29986992055217,
                            37.137281290615306,
                            0
                        ],
                        [
                            -113.29984868168391,
                            37.137280295195865,
                            0
                        ],
                        [
                            -113.29982994282707,
                            37.13728925826721,
                            0
                        ],
                        [
                            -113.29980245797263,
                            37.137310172812406,
                            0
                        ],
                        [
                            -113.29978621643231,
                            37.13732411583929,
                            0
                        ],
                        [
                            -113.29977107532821,
                            37.13734993084195,
                            0
                        ],
                        [
                            -113.2997518855171,
                            37.13735694245522,
                            0
                        ],
                        [
                            -113.29973029720418,
                            37.137357579809496,
                            0
                        ],
                        [
                            -113.29969911488405,
                            37.13735949187227,
                            0
                        ],
                        [
                            -113.29966073616015,
                            37.137374789088504,
                            0
                        ],
                        [
                            -113.29962795394052,
                            37.13738817495589,
                            0
                        ],
                        [
                            -113.29960956452832,
                            37.13739072437182,
                            0
                        ],
                        [
                            -113.29959117421781,
                            37.13739072437182,
                            0
                        ],
                        [
                            -113.29957038630383,
                            37.13738944966384,
                            0
                        ],
                        [
                            -113.29955119649274,
                            37.137374789088504,
                            0
                        ],
                        [
                            -113.29954480048792,
                            37.13736140393493,
                            0
                        ],
                        [
                            -113.29954080208657,
                            37.13735311761347,
                            0
                        ],
                        [
                            -113.29953040857875,
                            37.13733973245608,
                            0
                        ],
                        [
                            -113.29950562226342,
                            37.13733399555009,
                            0
                        ],
                        [
                            -113.29947363954436,
                            37.13733399555009,
                            0
                        ],
                        [
                            -113.29945604963278,
                            37.137331446132194,
                            0
                        ],
                        [
                            -113.29945684913339,
                            37.13730913729009,
                            0
                        ],
                        [
                            -113.29945604963278,
                            37.13728746579626,
                            0
                        ],
                        [
                            -113.2994416577236,
                            37.13726260680483,
                            0
                        ],
                        [
                            -113.29942086891131,
                            37.137249221631414,
                            0
                        ],
                        [
                            -113.29939528309538,
                            37.13725750796425,
                            0
                        ],
                        [
                            -113.29937209578128,
                            37.13727216784617,
                            0
                        ],
                        [
                            -113.29934890846717,
                            37.137267706361264,
                            0
                        ],
                        [
                            -113.29934810896654,
                            37.13724412278994,
                            0
                        ],
                        [
                            -113.29934251246232,
                            37.13723201160771,
                            0
                        ],
                        [
                            -113.29931612714581,
                            37.13723392438974,
                            0
                        ],
                        [
                            -113.29928814192976,
                            37.13724476014515,
                            0
                        ],
                        [
                            -113.29925056270649,
                            37.13727025578125,
                            0
                        ],
                        [
                            -113.29921538288333,
                            37.137297664189184,
                            0
                        ],
                        [
                            -113.29917140675691,
                            37.13732634729625,
                            0
                        ],
                        [
                            -113.29912343312748,
                            37.13734993084195,
                            0
                        ],
                        [
                            -113.29907785889817,
                            37.13737542715875,
                            0
                        ],
                        [
                            -113.29905307258284,
                            37.13738626289384,
                            0
                        ],
                        [
                            -113.2990218893644,
                            37.13739964804307,
                            0
                        ],
                        [
                            -113.29896592072893,
                            37.13740474687407,
                            0
                        ],
                        [
                            -113.2989387359118,
                            37.13740474687407,
                            0
                        ],
                        [
                            -113.29892994050685,
                            37.13738690024787,
                            0
                        ],
                        [
                            -113.29892034560129,
                            37.13737670186698,
                            0
                        ],
                        [
                            -113.29892034560129,
                            37.13736012922646,
                            0
                        ],
                        [
                            -113.2989187466001,
                            37.137343556582366,
                            0
                        ],
                        [
                            -113.29890595369213,
                            37.137325072587245,
                            0
                        ],
                        [
                            -113.29888436627755,
                            37.13731104935409,
                            0
                        ],
                        [
                            -113.29884838605547,
                            37.13727917946671,
                            0
                        ],
                        [
                            -113.29882280023953,
                            37.13725750796425,
                            0
                        ],
                        [
                            -113.29879321602229,
                            37.137236473810866,
                            0
                        ],
                        [
                            -113.29874684229237,
                            37.13720141639822,
                            0
                        ],
                        [
                            -113.29872845198189,
                            37.1371893059253,
                            0
                        ],
                        [
                            -113.29870606416837,
                            37.137177195450434,
                            0
                        ],
                        [
                            -113.29869407165934,
                            37.13716253483396,
                            0
                        ],
                        [
                            -113.29871166157089,
                            37.13714914964285,
                            0
                        ],
                        [
                            -113.29873884638803,
                            37.13713066488403,
                            0
                        ],
                        [
                            -113.29875723669853,
                            37.137119829112336,
                            0
                        ],
                        [
                            -113.29876283320276,
                            37.137096882851374,
                            0
                        ],
                        [
                            -113.29876842970698,
                            37.13708859650095,
                            0
                        ],
                        [
                            -113.29878202211553,
                            37.13707521129675,
                            0
                        ],
                        [
                            -113.29879801392423,
                            37.137064375517056,
                            0
                        ],
                        [
                            -113.29878202211553,
                            37.1370548144495,
                            0
                        ],
                        [
                            -113.29874284389105,
                            37.13703441759675,
                            0
                        ],
                        [
                            -113.29870366566657,
                            37.137014658095666,
                            0
                        ],
                        [
                            -113.29868607575499,
                            37.13700573437901,
                            0
                        ],
                        [
                            -113.29868687525558,
                            37.13698979901466,
                            0
                        ],
                        [
                            -113.29869167225921,
                            37.13695984106477,
                            0
                        ],
                        [
                            -113.29869167225921,
                            37.13694581848006,
                            0
                        ],
                        [
                            -113.29866448744207,
                            37.136946455837794,
                            0
                        ],
                        [
                            -113.29865169453413,
                            37.13694263169138,
                            0
                        ],
                        [
                            -113.29863730262495,
                            37.13693625739747,
                            0
                        ],
                        [
                            -113.29861731331324,
                            37.136933707966236,
                            0
                        ],
                        [
                            -113.29859732489987,
                            37.13693625739747,
                            0
                        ],
                        [
                            -113.29856774158092,
                            37.13692733367157,
                            0
                        ],
                        [
                            -113.29855814667538,
                            37.136919684660526,
                            0
                        ],
                        [
                            -113.2985621441784,
                            37.13688908932473,
                            0
                        ],
                        [
                            -113.29858533149252,
                            37.136867417710526,
                            0
                        ],
                        [
                            -113.29860531990589,
                            37.136836822353594,
                            0
                        ],
                        [
                            -113.29861251630963,
                            37.13680941377871,
                            0
                        ],
                        [
                            -113.29861251630963,
                            37.13679539116607,
                            0
                        ],
                        [
                            -113.29860132240289,
                            37.13678710478261,
                            0
                        ],
                        [
                            -113.29857306050572,
                            37.13679751235404,
                            0
                        ],
                        [
                            -113.29853597086428,
                            37.13679128771989,
                            0
                        ],
                        [
                            -113.29850083416024,
                            37.13677728229118,
                            0
                        ],
                        [
                            -113.29846960153445,
                            37.136769501496275,
                            0
                        ],
                        [
                            -113.29844617706512,
                            37.136760164541364,
                            0
                        ],
                        [
                            -113.29842080055664,
                            37.13675238374476,
                            0
                        ],
                        [
                            -113.29841072774735,
                            37.1367365106307,
                            0
                        ],
                        [
                            -113.29841197730391,
                            37.136722567495475,
                            0
                        ],
                        [
                            -113.29840573041943,
                            37.13670563664447,
                            0
                        ],
                        [
                            -113.29838449244949,
                            37.1367026489311,
                            0
                        ],
                        [
                            -113.29837802188449,
                            37.13667762432039,
                            0
                        ],
                        [
                            -113.29835857695186,
                            37.13665681916903,
                            0
                        ],
                        [
                            -113.29834834244582,
                            37.136637646084,
                            0
                        ],
                        [
                            -113.29832377981103,
                            37.136616841637796,
                            0
                        ],
                        [
                            -113.29830382283866,
                            37.13660011557784,
                            0
                        ],
                        [
                            -113.29828744834766,
                            37.13659358871823,
                            0
                        ],
                        [
                            -113.29827209703778,
                            37.13657563949329,
                            0
                        ],
                        [
                            -113.29824753440295,
                            37.136563401447994,
                            0
                        ],
                        [
                            -113.29822092540591,
                            37.13655238656106,
                            0
                        ],
                        [
                            -113.2982096677188,
                            37.13653484552394,
                            0
                        ],
                        [
                            -113.29818919870672,
                            37.136516488087324,
                            0
                        ],
                        [
                            -113.29817333535712,
                            37.13650547390965,
                            0
                        ],
                        [
                            -113.29815184316395,
                            37.13648548439057,
                            0
                        ],
                        [
                            -113.29813291027101,
                            37.13647406201048,
                            0
                        ],
                        [
                            -113.29809811313018,
                            37.136459784391015,
                            0
                        ],
                        [
                            -113.29806843369151,
                            37.13643490006283,
                            0
                        ],
                        [
                            -113.29804182469448,
                            37.13641858216092,
                            0
                        ],
                        [
                            -113.29800907481416,
                            37.13640675228855,
                            0
                        ],
                        [
                            -113.29797376563359,
                            37.136393697819244,
                            0
                        ],
                        [
                            -113.29794408619492,
                            37.13638186794298,
                            0
                        ],
                        [
                            -113.29792729578395,
                            37.13636386710588,
                            0
                        ],
                        [
                            -113.29789931146622,
                            37.13634219534128,
                            0
                        ],
                        [
                            -113.29789371406368,
                            37.13632626055326,
                            0
                        ],
                        [
                            -113.2978969129644,
                            37.1363090503196,
                            0
                        ],
                        [
                            -113.29791130487357,
                            37.13629885179342,
                            0
                        ],
                        [
                            -113.29792169838143,
                            37.136286103812736,
                            0
                        ],
                        [
                            -113.29794088819253,
                            37.13626570675275,
                            0
                        ],
                        [
                            -113.29794808459627,
                            37.136245947050895,
                            0
                        ],
                        [
                            -113.29795288159987,
                            37.136231286253974,
                            0
                        ],
                        [
                            -113.29796567450784,
                            37.13621088917921,
                            0
                        ],
                        [
                            -113.29797367041218,
                            37.13619622909164,
                            0
                        ],
                        [
                            -113.29798486342062,
                            37.13618666791438,
                            0
                        ],
                        [
                            -113.29799525782677,
                            37.13616690819189,
                            0
                        ],
                        [
                            -113.29800485273233,
                            37.136149060557536,
                            0
                        ],
                        [
                            -113.29801764564027,
                            37.136126114002145,
                            0
                        ],
                        [
                            -113.29802004414209,
                            37.13610954108774,
                            0
                        ],
                        [
                            -113.29801524713848,
                            37.13609615571028,
                            0
                        ],
                        [
                            -113.29799605732737,
                            37.13609041871,
                            0
                        ],
                        [
                            -113.29795288159987,
                            37.136092330804786,
                            0
                        ],
                        [
                            -113.2979208988808,
                            37.13609424361563,
                            0
                        ],
                        [
                            -113.29789371406368,
                            37.13610125462918,
                            0
                        ],
                        [
                            -113.2978777231533,
                            37.136099342534614,
                            0
                        ],
                        [
                            -113.29786173224295,
                            37.13607958278931,
                            0
                        ],
                        [
                            -113.29785053833618,
                            37.13606428531114,
                            0
                        ],
                        [
                            -113.29787132625019,
                            37.13604325010993,
                            0
                        ],
                        [
                            -113.2978969129644,
                            37.136026677893526,
                            0
                        ],
                        [
                            -113.29790330896924,
                            37.136010742322895,
                            0
                        ],
                        [
                            -113.29790330896924,
                            37.1359992690251,
                            0
                        ],
                        [
                            -113.29791929987961,
                            37.13597887188779,
                            0
                        ],
                        [
                            -113.29792729578395,
                            37.13595847474497,
                            0
                        ],
                        [
                            -113.29793369178877,
                            37.13594763880539,
                            0
                        ],
                        [
                            -113.29794328669433,
                            37.13593106585189,
                            0
                        ],
                        [
                            -113.29794808459627,
                            37.13590748186391,
                            0
                        ],
                        [
                            -113.29794488569554,
                            37.135886447335196,
                            0
                        ],
                        [
                            -113.29794328669433,
                            37.13587497401855,
                            0
                        ],
                        [
                            -113.29790890547346,
                            37.13587943558565,
                            0
                        ],
                        [
                            -113.29788412005644,
                            37.135880072952354,
                            0
                        ],
                        [
                            -113.29784893933498,
                            37.13587306191831,
                            0
                        ],
                        [
                            -113.29783214802569,
                            37.13586350070016,
                            0
                        ],
                        [
                            -113.29782815052269,
                            37.13584756509522,
                            0
                        ],
                        [
                            -113.29783854492884,
                            37.1358176066931,
                            0
                        ],
                        [
                            -113.2978313485251,
                            37.13578764827908,
                            0
                        ],
                        [
                            -113.29781935511774,
                            37.135762789511055,
                            0
                        ],
                        [
                            -113.29781775611652,
                            37.13573346844328,
                            0
                        ],
                        [
                            -113.29782255401845,
                            37.13571243386618,
                            0
                        ],
                        [
                            -113.2978145581141,
                            37.13569203665154,
                            0
                        ],
                        [
                            -113.29781615711532,
                            37.135672276799866,
                            0
                        ],
                        [
                            -113.29781695661592,
                            37.13565570378606,
                            0
                        ],
                        [
                            -113.29780496320858,
                            37.13564741727778,
                            0
                        ],
                        [
                            -113.29779137079998,
                            37.13564486780311,
                            0
                        ],
                        [
                            -113.29778257539505,
                            37.13564040622219,
                            0
                        ],
                        [
                            -113.2977713823866,
                            37.135628294783295,
                            0
                        ],
                        [
                            -113.2977713823866,
                            37.13561363458284,
                            0
                        ],
                        [
                            -113.29780096570556,
                            37.135588137672315,
                            0
                        ],
                        [
                            -113.29782974952388,
                            37.13556837779351,
                            0
                        ],
                        [
                            -113.2978561348404,
                            37.13554033210565,
                            0
                        ],
                        [
                            -113.29785853334222,
                            37.13551802201924,
                            0
                        ],
                        [
                            -113.29784334193243,
                            37.1354989002082,
                            0
                        ],
                        [
                            -113.29782495252024,
                            37.13549061368271,
                            0
                        ],
                        [
                            -113.29780416370795,
                            37.13548360189647,
                            0
                        ],
                        [
                            -113.29775539057792,
                            37.135475952739476,
                            0
                        ],
                        [
                            -113.29773380316333,
                            37.135472765888885,
                            0
                        ],
                        [
                            -113.29771061584921,
                            37.13547021640832,
                            0
                        ],
                        [
                            -113.29773300366273,
                            37.135451731239314,
                            0
                        ],
                        [
                            -113.29776978248708,
                            37.13544025785674,
                            0
                        ],
                        [
                            -113.29779456880242,
                            37.13542432216266,
                            0
                        ],
                        [
                            -113.29780816121098,
                            37.13541284877593,
                            0
                        ],
                        [
                            -113.29780736171037,
                            37.1353962757053,
                            0
                        ],
                        [
                            -113.29780416370795,
                            37.13537651577633,
                            0
                        ],
                        [
                            -113.29779776770313,
                            37.13534655718769,
                            0
                        ],
                        [
                            -113.29778577429578,
                            37.135322973017516,
                            0
                        ],
                        [
                            -113.29773860016695,
                            37.13530703801483,
                            0
                        ],
                        [
                            -113.29770501844666,
                            37.13529938883998,
                            0
                        ],
                        [
                            -113.29767303662594,
                            37.13529110229269,
                            0
                        ],
                        [
                            -113.29765944421735,
                            37.13524648339865,
                            0
                        ],
                        [
                            -113.29765784521615,
                            37.135231185035884,
                            0
                        ],
                        [
                            -113.29765784521615,
                            37.1352133371808,
                            0
                        ],
                        [
                            -113.29768423053268,
                            37.13519230245916,
                            0
                        ],
                        [
                            -113.29771061584921,
                            37.13517445459491,
                            0
                        ],
                        [
                            -113.29771461335223,
                            37.13515724481541,
                            0
                        ],
                        [
                            -113.29771781135463,
                            37.13514130906167,
                            0
                        ],
                        [
                            -113.29771861085526,
                            37.13513302249707,
                            0
                        ],
                        [
                            -113.29769862244187,
                            37.13512792351297,
                            0
                        ],
                        [
                            -113.29770501844666,
                            37.13511071300673,
                            0
                        ],
                        [
                            -113.29768023213136,
                            37.13511645008129,
                            0
                        ],
                        [
                            -113.29766823872401,
                            37.1351017890655,
                            0
                        ],
                        [
                            -113.29765704571555,
                            37.13508457855332,
                            0
                        ],
                        [
                            -113.29764585180881,
                            37.13507565532518,
                            0
                        ],
                        [
                            -113.29763305890084,
                            37.13506928087403,
                            0
                        ],
                        [
                            -113.2976282609989,
                            37.13505653268618,
                            0
                        ],
                        [
                            -113.2976226644947,
                            37.13503932216369,
                            0
                        ],
                        [
                            -113.29761706709215,
                            37.13503167296179,
                            0
                        ],
                        [
                            -113.29760987158673,
                            37.13502019951551,
                            0
                        ],
                        [
                            -113.29759787817937,
                            37.13501510052375,
                            0
                        ],
                        [
                            -113.29757628986647,
                            37.13501446314981,
                            0
                        ],
                        [
                            -113.29755630145308,
                            37.13500808869345,
                            0
                        ],
                        [
                            -113.29753215473825,
                            37.13501117387022,
                            0
                        ],
                        [
                            -113.29750861528453,
                            37.13499648776876,
                            0
                        ],
                        [
                            -113.29748251832723,
                            37.13497568215511,
                            0
                        ],
                        [
                            -113.29745949091323,
                            37.1349565086441,
                            0
                        ],
                        [
                            -113.2974323698765,
                            37.13493855903074,
                            0
                        ],
                        [
                            -113.2974021783981,
                            37.13491734519481,
                            0
                        ],
                        [
                            -113.29736379967422,
                            37.13490347548801,
                            0
                        ],
                        [
                            -113.29732797935225,
                            37.13488103773877,
                            0
                        ],
                        [
                            -113.29731160486126,
                            37.13484432277473,
                            0
                        ],
                        [
                            -113.29730853441961,
                            37.13481902970839,
                            0
                        ],
                        [
                            -113.29731262804238,
                            37.1347961844433,
                            0
                        ],
                        [
                            -113.29735202994736,
                            37.13476273294705,
                            0
                        ],
                        [
                            -113.29738170938603,
                            37.13474682289179,
                            0
                        ],
                        [
                            -113.29737966302383,
                            37.1347272411154,
                            0
                        ],
                        [
                            -113.29737198691971,
                            37.13470561972888,
                            0
                        ],
                        [
                            -113.29735817083063,
                            37.13468563045043,
                            0
                        ],
                        [
                            -113.29736175241368,
                            37.13467543170542,
                            0
                        ],
                        [
                            -113.29737812780299,
                            37.13466319263659,
                            0
                        ],
                        [
                            -113.29738989752985,
                            37.134651362489805,
                            0
                        ],
                        [
                            -113.2973939911526,
                            37.134630556781204,
                            0
                        ],
                        [
                            -113.29739552637342,
                            37.13460118442772,
                            0
                        ],
                        [
                            -113.29739092071095,
                            37.13458282652195,
                            0
                        ],
                        [
                            -113.29737403418025,
                            37.134570179946124,
                            0
                        ],
                        [
                            -113.29735356516818,
                            37.13454284789484,
                            0
                        ],
                        [
                            -113.29733616659777,
                            37.13452367355799,
                            0
                        ],
                        [
                            -113.29731365122348,
                            37.13451265909022,
                            0
                        ],
                        [
                            -113.2972901126681,
                            37.13450246032189,
                            0
                        ],
                        [
                            -113.2972829486037,
                            37.13448165457235,
                            0
                        ],
                        [
                            -113.29727169091656,
                            37.13446370484639,
                            0
                        ],
                        [
                            -113.29724917554228,
                            37.13443678024943,
                            0
                        ],
                        [
                            -113.29722256564692,
                            37.134407407820675,
                            0
                        ],
                        [
                            -113.29721489044114,
                            37.1343857863428,
                            0
                        ],
                        [
                            -113.29720158549348,
                            37.13435559819168,
                            0
                        ],
                        [
                            -113.29719902709155,
                            37.13433724022632,
                            0
                        ],
                        [
                            -113.29720312071429,
                            37.13431643443134,
                            0
                        ],
                        [
                            -113.29720158549348,
                            37.134289509781986,
                            0
                        ],
                        [
                            -113.29720670229733,
                            37.13425605734561,
                            0
                        ],
                        [
                            -113.29720414389539,
                            37.13423770007227,
                            0
                        ],
                        [
                            -113.29721284318062,
                            37.134210367184714,
                            0
                        ],
                        [
                            -113.2972189840639,
                            37.13417936254297,
                            0
                        ],
                        [
                            -113.29722205450554,
                            37.134160596324456,
                            0
                        ],
                        [
                            -113.29720772637675,
                            37.13414305473282,
                            0
                        ],
                        [
                            -113.29719544461018,
                            37.13410878652641,
                            0
                        ],
                        [
                            -113.297196979831,
                            37.13408798066867,
                            0
                        ],
                        [
                            -113.29720209753319,
                            37.134059016315504,
                            0
                        ],
                        [
                            -113.29720772637675,
                            37.13403780294914,
                            0
                        ],
                        [
                            -113.29722461290746,
                            37.13402230023642,
                            0
                        ],
                        [
                            -113.29723945217762,
                            37.13400639002541,
                            0
                        ],
                        [
                            -113.29724661624203,
                            37.13399455977588,
                            0
                        ],
                        [
                            -113.29724712828175,
                            37.13398109739513,
                            0
                        ],
                        [
                            -113.2972440578401,
                            37.13396437075256,
                            0
                        ],
                        [
                            -113.29724149943819,
                            37.13394682911542,
                            0
                        ],
                        [
                            -113.2972450810212,
                            37.1339341824333,
                            0
                        ],
                        [
                            -113.29725838596889,
                            37.13392194396081,
                            0
                        ],
                        [
                            -113.2972819254226,
                            37.133915008658384,
                            0
                        ],
                        [
                            -113.29731006964045,
                            37.13391052119364,
                            0
                        ],
                        [
                            -113.29732746821087,
                            37.13389501917101,
                            0
                        ],
                        [
                            -113.29733667863748,
                            37.13388359639984,
                            0
                        ],
                        [
                            -113.2973392370394,
                            37.1338644226121,
                            0
                        ],
                        [
                            -113.29734128429993,
                            37.13384728844777,
                            0
                        ],
                        [
                            -113.29734128429993,
                            37.13382770643858,
                            0
                        ],
                        [
                            -113.2973392370394,
                            37.133811387974376,
                            0
                        ],
                        [
                            -113.29733412023555,
                            37.13379792556104,
                            0
                        ],
                        [
                            -113.2973371906772,
                            37.1337811995941,
                            0
                        ],
                        [
                            -113.29736124127228,
                            37.133769368593235,
                            0
                        ],
                        [
                            -113.29736994055752,
                            37.13375998614983,
                            0
                        ],
                        [
                            -113.29737608054246,
                            37.13374937906739,
                            0
                        ],
                        [
                            -113.29737454532165,
                            37.133742443749206,
                            0
                        ],
                        [
                            -113.29735510038898,
                            37.13373795627424,
                            0
                        ],
                        [
                            -113.29736687011587,
                            37.13371959815902,
                            0
                        ],
                        [
                            -113.29738375664657,
                            37.13370735965181,
                            0
                        ],
                        [
                            -113.29737915098411,
                            37.13368043478572,
                            0
                        ],
                        [
                            -113.29736891647808,
                            37.13366370807662,
                            0
                        ],
                        [
                            -113.29736942851778,
                            37.13364249459942,
                            0
                        ],
                        [
                            -113.29738375664657,
                            37.133632703927056,
                            0
                        ],
                        [
                            -113.29740422565862,
                            37.13362576859812,
                            0
                        ],
                        [
                            -113.29742981147456,
                            37.133613530075735,
                            0
                        ],
                        [
                            -113.29743339305757,
                            37.133596395854596,
                            0
                        ],
                        [
                            -113.29743953394087,
                            37.133579261629514,
                            0
                        ],
                        [
                            -113.29746102613403,
                            37.1335633513254,
                            0
                        ],
                        [
                            -113.2974600020546,
                            37.133549072440495,
                            0
                        ],
                        [
                            -113.29745488525076,
                            37.13353316212998,
                            0
                        ],
                        [
                            -113.29745437321105,
                            37.13351725181618,
                            0
                        ],
                        [
                            -113.29746115369483,
                            37.13346997991649,
                            0
                        ],
                        [
                            -113.29748673951073,
                            37.13343938318565,
                            0
                        ],
                        [
                            -113.29751072632546,
                            37.13341069932118,
                            0
                        ],
                        [
                            -113.29754030964439,
                            37.133387113831425,
                            0
                        ],
                        [
                            -113.29755869995488,
                            37.133360342110976,
                            0
                        ],
                        [
                            -113.29758508527141,
                            37.133336756605516,
                            0
                        ],
                        [
                            -113.29762506299652,
                            37.13330615982087,
                            0
                        ],
                        [
                            -113.29764185340748,
                            37.133290224393434,
                            0
                        ],
                        [
                            -113.29765784521615,
                            37.133267913643564,
                            0
                        ],
                        [
                            -113.29766264221979,
                            37.13324241665877,
                            0
                        ],
                        [
                            -113.29766903912292,
                            37.13320990766838,
                            0
                        ],
                        [
                            -113.29767463562713,
                            37.133180585611285,
                            0
                        ],
                        [
                            -113.29765704571555,
                            37.133146801098746,
                            0
                        ],
                        [
                            -113.29765384681484,
                            37.13311556684729,
                            0
                        ],
                        [
                            -113.29768183203089,
                            37.133086882143886,
                            0
                        ],
                        [
                            -113.29768662903449,
                            37.13306011031716,
                            0
                        ],
                        [
                            -113.29769542443942,
                            37.13301612678216,
                            0
                        ],
                        [
                            -113.29770581794729,
                            37.13299190449455,
                            0
                        ],
                        [
                            -113.29771381385162,
                            37.13296321974427,
                            0
                        ],
                        [
                            -113.29770821734739,
                            37.1329287984593,
                            0
                        ],
                        [
                            -113.29771221485042,
                            37.13289692672601,
                            0
                        ],
                        [
                            -113.29772820576078,
                            37.132863779478946,
                            0
                        ],
                        [
                            -113.2977497940737,
                            37.13283254511065,
                            0
                        ],
                        [
                            -113.29775219257552,
                            37.1327930239086,
                            0
                        ],
                        [
                            -113.29776578498408,
                            37.13276497719201,
                            0
                        ],
                        [
                            -113.29778897229819,
                            37.132731829887135,
                            0
                        ],
                        [
                            -113.2978121596123,
                            37.13270505793479,
                            0
                        ],
                        [
                            -113.29782335351905,
                            37.132679560044146,
                            0
                        ],
                        [
                            -113.29781375861351,
                            37.132644501236165,
                            0
                        ],
                        [
                            -113.29779137079998,
                            37.132608166907275,
                            0
                        ],
                        [
                            -113.29775858947863,
                            37.132548884920666,
                            0
                        ],
                        [
                            -113.29773939966755,
                            37.13251318865707,
                            0
                        ],
                        [
                            -113.2977306042626,
                            37.13249024028283,
                            0
                        ],
                        [
                            -113.29772420825778,
                            37.132467292617804,
                            0
                        ],
                        [
                            -113.29773939966755,
                            37.132445619737126,
                            0
                        ],
                        [
                            -113.29775619007853,
                            37.13242649643338,
                            0
                        ],
                        [
                            -113.29776418598286,
                            37.13240673572889,
                            0
                        ],
                        [
                            -113.29779536830301,
                            37.1323818758501,
                            0
                        ],
                        [
                            -113.29780656220977,
                            37.1323595648324,
                            0
                        ],
                        [
                            -113.29782255401845,
                            37.132299007857284,
                            0
                        ],
                        [
                            -113.29783614642702,
                            37.13226968544722,
                            0
                        ],
                        [
                            -113.29782735102206,
                            37.13224482552339,
                            0
                        ],
                        [
                            -113.29782015461832,
                            37.13221677788748,
                            0
                        ],
                        [
                            -113.29782015461832,
                            37.13219701712822,
                            0
                        ],
                        [
                            -113.29782495252024,
                            37.132177256363754,
                            0
                        ],
                        [
                            -113.29782895002327,
                            37.13215367120578,
                            0
                        ],
                        [
                            -113.29781615711532,
                            37.13213582262477,
                            0
                        ],
                        [
                            -113.29780176520613,
                            37.13211669924279,
                            0
                        ],
                        [
                            -113.2977929698012,
                            37.13209438886304,
                            0
                        ],
                        [
                            -113.29777697889082,
                            37.13206060458173,
                            0
                        ],
                        [
                            -113.29775219257552,
                            37.13203319427665,
                            0
                        ],
                        [
                            -113.29774179816937,
                            37.13198411094873,
                            0
                        ],
                        [
                            -113.29774019916816,
                            37.131967537127075,
                            0
                        ],
                        [
                            -113.2977290052614,
                            37.13195478841664,
                            0
                        ],
                        [
                            -113.29770901684802,
                            37.131938852704614,
                            0
                        ],
                        [
                            -113.29769942194245,
                            37.13192100407299,
                            0
                        ],
                        [
                            -113.29769622394005,
                            37.13189996843604,
                            0
                        ],
                        [
                            -113.29769942194245,
                            37.131873832873644,
                            0
                        ],
                        [
                            -113.29769942194245,
                            37.13185215982299,
                            0
                        ],
                        [
                            -113.29769862244187,
                            37.131829211964465,
                            0
                        ],
                        [
                            -113.29768982703692,
                            37.13181646251453,
                            0
                        ],
                        [
                            -113.29768982703692,
                            37.131797977169136,
                            0
                        ],
                        [
                            -113.29769542443942,
                            37.131774391176705,
                            0
                        ],
                        [
                            -113.29770261994487,
                            37.13175144329459,
                            0
                        ],
                        [
                            -113.29769222553873,
                            37.13172339547581,
                            0
                        ],
                        [
                            -113.2976874285351,
                            37.131697897970575,
                            0
                        ],
                        [
                            -113.29767863313016,
                            37.13167877447787,
                            0
                        ],
                        [
                            -113.29767063812412,
                            37.131654551046026,
                            0
                        ],
                        [
                            -113.29766024371797,
                            37.13163797786833,
                            0
                        ],
                        [
                            -113.29765784521615,
                            37.131627141310005,
                            0
                        ],
                        [
                            -113.29767543512774,
                            37.13157933252459,
                            0
                        ],
                        [
                            -113.2976658402222,
                            37.131560209001975,
                            0
                        ],
                        [
                            -113.29766264221979,
                            37.13154236028098,
                            0
                        ],
                        [
                            -113.29765624531665,
                            37.13151240017422,
                            0
                        ],
                        [
                            -113.29764825031063,
                            37.13149582696545,
                            0
                        ],
                        [
                            -113.29765624531665,
                            37.13146905385961,
                            0
                        ],
                        [
                            -113.29765624531665,
                            37.13142060757004,
                            0
                        ],
                        [
                            -113.29766104321857,
                            37.131375986393614,
                            0
                        ],
                        [
                            -113.2976666397228,
                            37.13132499042423,
                            0
                        ],
                        [
                            -113.29766264221979,
                            37.131291842488515,
                            0
                        ],
                        [
                            -113.29764505230818,
                            37.13127016927117,
                            0
                        ],
                        [
                            -113.29763625690325,
                            37.1312478586419,
                            0
                        ],
                        [
                            -113.29763865540505,
                            37.131237659433474,
                            0
                        ],
                        [
                            -113.29761067108733,
                            37.1312102488303,
                            0
                        ],
                        [
                            -113.29760187568237,
                            37.13120196255133,
                            0
                        ],
                        [
                            -113.29760587408371,
                            37.13118857558953,
                            0
                        ],
                        [
                            -113.29759547967757,
                            37.13117582674791,
                            0
                        ],
                        [
                            -113.2975834862702,
                            37.13116180309118,
                            0
                        ],
                        [
                            -113.29757948786887,
                            37.13114522908943,
                            0
                        ],
                        [
                            -113.29757309186405,
                            37.13112738027061,
                            0
                        ],
                        [
                            -113.29755070405054,
                            37.13111718104595,
                            0
                        ],
                        [
                            -113.29753071563717,
                            37.13111208179123,
                            0
                        ],
                        [
                            -113.29751552332908,
                            37.13109741999955,
                            0
                        ],
                        [
                            -113.29750912732425,
                            37.13107702154082,
                            0
                        ],
                        [
                            -113.29750832782365,
                            37.131061085644,
                            0
                        ],
                        [
                            -113.29751312482726,
                            37.13104833606465,
                            0
                        ],
                        [
                            -113.29752671723583,
                            37.13103813682938,
                            0
                        ],
                        [
                            -113.2975211207316,
                            37.13100881393073,
                            0
                        ],
                        [
                            -113.29751072632546,
                            37.13098905285602,
                            0
                        ],
                        [
                            -113.29751472382846,
                            37.13097184212459,
                            0
                        ],
                        [
                            -113.29751712233028,
                            37.13094060697536,
                            0
                        ],
                        [
                            -113.29752271973281,
                            37.13091765812421,
                            0
                        ],
                        [
                            -113.29751632282967,
                            37.13089470998229,
                            0
                        ],
                        [
                            -113.29751312482726,
                            37.13088196109111,
                            0
                        ],
                        [
                            -113.29752192023221,
                            37.130868574788906,
                            0
                        ],
                        [
                            -113.29753951014376,
                            37.13085709999518,
                            0
                        ],
                        [
                            -113.29754750604813,
                            37.13083287701646,
                            0
                        ],
                        [
                            -113.29755310255236,
                            37.130805466266665,
                            0
                        ],
                        [
                            -113.29756029895609,
                            37.13077741809725,
                            0
                        ],
                        [
                            -113.29756749446152,
                            37.13075319509302,
                            0
                        ],
                        [
                            -113.29758668427262,
                            37.13073407136164,
                            0
                        ],
                        [
                            -113.29759947718058,
                            37.13070857352305,
                            0
                        ],
                        [
                            -113.29761306958913,
                            37.13069327424279,
                            0
                        ],
                        [
                            -113.29763145989963,
                            37.130672875675124,
                            0
                        ],
                        [
                            -113.29763465790204,
                            37.130660764157234,
                            0
                        ],
                        [
                            -113.29763945490568,
                            37.13063972817001,
                            0
                        ],
                        [
                            -113.29764984931182,
                            37.130623154053914,
                            0
                        ],
                        [
                            -113.29764105390687,
                            37.13060785547258,
                            0
                        ],
                        [
                            -113.29763705640386,
                            37.13058745688189,
                            0
                        ],
                        [
                            -113.29763465790204,
                            37.13056705828569,
                            0
                        ],
                        [
                            -113.29764345240868,
                            37.13054729709564,
                            0
                        ],
                        [
                            -113.29764265290808,
                            37.13051669918307,
                            0
                        ],
                        [
                            -113.2976442528076,
                            37.13049948762799,
                            0
                        ],
                        [
                            -113.29765944421735,
                            37.13048100124463,
                            0
                        ],
                        [
                            -113.2976658402222,
                            37.130463789681436,
                            0
                        ],
                        [
                            -113.2976650407216,
                            37.1304440284644,
                            0
                        ],
                        [
                            -113.29767223712531,
                            37.130422992416875,
                            0
                        ],
                        [
                            -113.29768183203089,
                            37.1304089686207,
                            0
                        ],
                        [
                            -113.2976874285351,
                            37.13038410808557,
                            0
                        ],
                        [
                            -113.29770022144307,
                            37.13035988423925,
                            0
                        ],
                        [
                            -113.29769782294125,
                            37.130336935928185,
                            0
                        ],
                        [
                            -113.29768503003328,
                            37.13032036174577,
                            0
                        ],
                        [
                            -113.29767543512774,
                            37.13030506310323,
                            0
                        ],
                        [
                            -113.29767703412895,
                            37.130283389603264,
                            0
                        ],
                        [
                            -113.29767943263076,
                            37.130258528310684,
                            0
                        ],
                        [
                            -113.29767063812412,
                            37.13022920510995,
                            0
                        ],
                        [
                            -113.29766184271917,
                            37.13020243155598,
                            0
                        ],
                        [
                            -113.29765384681484,
                            37.130169921259615,
                            0
                        ],
                        [
                            -113.29765064881242,
                            37.130141235439595,
                            0
                        ],
                        [
                            -113.2976442528076,
                            37.13012721159115,
                            0
                        ],
                        [
                            -113.29762666199771,
                            37.13011956189266,
                            0
                        ],
                        [
                            -113.29761866699167,
                            37.13010681287095,
                            0
                        ],
                        [
                            -113.29760667358433,
                            37.130082589652055,
                            0
                        ],
                        [
                            -113.2976034746836,
                            37.13007111473915,
                            0
                        ],
                        [
                            -113.29761626759156,
                            37.13005326638314,
                            0
                        ],
                        [
                            -113.29760107618178,
                            37.13001629339394,
                            0
                        ],
                        [
                            -113.29759787817937,
                            37.12999908172505,
                            0
                        ],
                        [
                            -113.29759707867876,
                            37.12998697009934,
                            0
                        ],
                        [
                            -113.29759228077684,
                            37.12997804555389,
                            0
                        ],
                        [
                            -113.29763065950073,
                            37.12995191004393,
                            0
                        ],
                        [
                            -113.29763385840144,
                            37.12992959830972,
                            0
                        ],
                        [
                            -113.29761706709215,
                            37.12990346278303,
                            0
                        ],
                        [
                            -113.29760827258552,
                            37.12988880075723,
                            0
                        ],
                        [
                            -113.29761786659276,
                            37.12984609093015,
                            0
                        ],
                        [
                            -113.29760587408371,
                            37.12982250504556,
                            0
                        ],
                        [
                            -113.29759388067636,
                            37.12979318167586,
                            0
                        ],
                        [
                            -113.29758028736948,
                            37.129770870611125,
                            0
                        ],
                        [
                            -113.29756109845668,
                            37.12975557114129,
                            0
                        ],
                        [
                            -113.29754510754633,
                            37.129732622646976,
                            0
                        ],
                        [
                            -113.297520321231,
                            37.12971987356002,
                            0
                        ],
                        [
                            -113.2975011314199,
                            37.12970011214873,
                            0
                        ],
                        [
                            -113.29748194250712,
                            37.12967780034035,
                            0
                        ],
                        [
                            -113.2974795440053,
                            37.1296542144033,
                            0
                        ],
                        [
                            -113.29750273042112,
                            37.12960895476578,
                            0
                        ],
                        [
                            -113.29749153651434,
                            37.12957899389361,
                            0
                        ],
                        [
                            -113.29749073701375,
                            37.12951970953385,
                            0
                        ],
                        [
                            -113.29747634510458,
                            37.12950249775203,
                            0
                        ],
                        [
                            -113.29746755059796,
                            37.12947827433976,
                            0
                        ],
                        [
                            -113.29747474610338,
                            37.129449588257565,
                            0
                        ],
                        [
                            -113.29749313641389,
                            37.12935843057284,
                            0
                        ],
                        [
                            -113.29748753901134,
                            37.12932846960144,
                            0
                        ],
                        [
                            -113.29746835009855,
                            37.12930934551,
                            0
                        ],
                        [
                            -113.29746115369483,
                            37.12928575945813,
                            0
                        ],
                        [
                            -113.29745715619181,
                            37.129260260415336,
                            0
                        ],
                        [
                            -113.29747394660278,
                            37.129234762080166,
                            0
                        ],
                        [
                            -113.2974987329181,
                            37.12919396415303,
                            0
                        ],
                        [
                            -113.29750832782365,
                            37.12917866456656,
                            0
                        ],
                        [
                            -113.29749393591449,
                            37.129144878983524,
                            0
                        ],
                        [
                            -113.29746835009855,
                            37.12909770605373,
                            0
                        ],
                        [
                            -113.29748114300652,
                            37.129067107554995,
                            0
                        ],
                        [
                            -113.29748434100894,
                            37.129037146468306,
                            0
                        ],
                        [
                            -113.29750752832305,
                            37.12901865972771,
                            0
                        ],
                        [
                            -113.29751472382846,
                            37.12898933604655,
                            0
                        ],
                        [
                            -113.29752192023221,
                            37.128967662169764,
                            0
                        ],
                        [
                            -113.29752591773523,
                            37.12894088816948,
                            0
                        ],
                        [
                            -113.29752671723583,
                            37.12892367697222,
                            0
                        ],
                        [
                            -113.29752591773523,
                            37.12891092703282,
                            0
                        ],
                        [
                            -113.29753711164197,
                            37.128896902956434,
                            0
                        ],
                        [
                            -113.29755470155355,
                            37.128884153728684,
                            0
                        ],
                        [
                            -113.2975666949609,
                            37.12886821665386,
                            0
                        ],
                        [
                            -113.29756829486044,
                            37.12885737969885,
                            0
                        ],
                        [
                            -113.2975810877684,
                            37.128836343210324,
                            0
                        ],
                        [
                            -113.29759388067636,
                            37.12882359397237,
                            0
                        ],
                        [
                            -113.29759468017696,
                            37.128811482158525,
                            0
                        ],
                        [
                            -113.29760587408371,
                            37.12879299536287,
                            0
                        ],
                        [
                            -113.29763065950073,
                            37.12878343325008,
                            0
                        ],
                        [
                            -113.29765144831302,
                            37.12876940843383,
                            0
                        ],
                        [
                            -113.29767223712531,
                            37.128763034167605,
                            0
                        ],
                        [
                            -113.2976858295339,
                            37.12876367159426,
                            0
                        ],
                        [
                            -113.29769782294125,
                            37.128756021757944,
                            0
                        ],
                        [
                            -113.29769382453992,
                            37.12872797282893,
                            0
                        ],
                        [
                            -113.29772021075476,
                            37.12872733540198,
                            0
                        ],
                        [
                            -113.29773939966755,
                            37.128699286462336,
                            0
                        ],
                        [
                            -113.2977505935743,
                            37.12867697507505,
                            0
                        ],
                        [
                            -113.29777537988963,
                            37.12865593853638,
                            0
                        ],
                        [
                            -113.29780096570556,
                            37.12864127698505,
                            0
                        ],
                        [
                            -113.29782895002327,
                            37.128648288689114,
                            0
                        ],
                        [
                            -113.29785773384162,
                            37.12864127698505,
                            0
                        ],
                        [
                            -113.29787452515092,
                            37.128661038672824,
                            0
                        ],
                        [
                            -113.29788571905766,
                            37.128677612502436,
                            0
                        ],
                        [
                            -113.29790730647227,
                            37.12869163733568,
                            0
                        ],
                        [
                            -113.29793449128938,
                            37.12870693630439,
                            0
                        ],
                        [
                            -113.29799046082314,
                            37.12867824992981,
                            0
                        ],
                        [
                            -113.29801524713848,
                            37.128651476543354,
                            0
                        ]
                        ]
                    },
                    "properties": {
                        "name": "Your Route"
                    }
                }
            ]
        };

        // Wait for map load in parallel
        await map.once('style.load');


        // // Start downloading the route data, and wait for map load to occur in parallel
        // const [pinRouteGeojson] = await Promise.all([
        //     fetch(
        //         'https://docs.mapbox.com/mapbox-gl-js/assets/route-pin.geojson'
        //     ).then((response) => response.json()),
        //     map.once('style.load')
        // ]);

        // Set custom fog
        map.setFog({
            'range': [-0.5, 2],
            'color': '#def',
            'high-color': '#def',
            'space-color': '#def'
        });

        // Add terrain source, with slight exaggeration
        map.addSource('mapbox-dem', {
            'type': 'raster-dem',
            'url': 'mapbox://mapbox.terrain-rgb',
            'tileSize': 512,
            'maxzoom': 14
        });
        map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.2 });

        const pinRoute = pinRouteGeojson.features[0].geometry.coordinates;
        // Create the marker and popup that will display the elevation queries
        const popup = new mapboxgl.Popup({ closeButton: false });
        const marker = new mapboxgl.Marker({
            color: 'red',
            scale: 0.8,
            draggable: false,
            pitchAlignment: 'auto',
            rotationAlignment: 'auto'
        })
            .setLngLat(pinRoute[0])
            .setPopup(popup)
            .addTo(map)
            .togglePopup();

        // Add a line feature and layer. This feature will get updated as we progress the animation
        map.addSource('line', {
            type: 'geojson',
            // Line metrics is required to use the 'line-progress' property
            lineMetrics: true,
            data: pinRouteGeojson
        });
        map.addLayer({
            type: 'line',
            source: 'line',
            id: 'line',
            paint: {
                'line-color': 'rgba(0,0,0,0)',
                'line-width': 5
            },
            layout: {
                'line-cap': 'round',
                'line-join': 'round'
            }
        });

        await map.once('idle');
        // The total animation duration, in milliseconds
        const animationDuration = 20000;
        // Use the https://turfjs.org/ library to calculate line distances and
        // sample the line at a given percentage with the turf.along function.
        const path = turf.lineString(pinRoute);
        // Get the total line distance
        const pathDistance = turf.lineDistance(path);
        let start;
        function frame(time) {
            if (!start) start = time;
            const animationPhase = (time - start) / animationDuration;
            if (animationPhase > 1) {
                return;
            }

            // Get the new latitude and longitude by sampling along the path
            const alongPath = turf.along(path, pathDistance * animationPhase)
                .geometry.coordinates;
            const lngLat = {
                lng: alongPath[0],
                lat: alongPath[1]
            };
            // Sample the terrain elevation and convert from meters to feet
            const elevationInMeters = map.queryTerrainElevation(lngLat, { exaggerated: false });
            const elevationInFeet = Math.floor(elevationInMeters * 3.28084); // Conversion to feet

            // Sample the terrain elevation. We round to an integer value to
            // prevent showing a lot of digits during the animation
            const elevation = Math.floor(
                // Do not use terrain exaggeration to get actual meter values
                map.queryTerrainElevation(lngLat, { exaggerated: false })
            );

            // Update the popup altitude value and marker location
            popup.setHTML('Altitude: ' + elevationInFeet + 'ft<br/>');
            marker.setLngLat(lngLat);

            // Reduce the visible length of the line by using a line-gradient to cutoff the line
            // animationPhase is a value between 0 and 1 that reprents the progress of the animation
            map.setPaintProperty('line', 'line-gradient', [
                'step',
                ['line-progress'],
                'red',
                animationPhase,
                'rgba(255, 0, 0, 0)'
            ]);

            // Rotate the camera at a slightly lower speed to give some parallax effect in the background
            const rotation = 150 + animationPhase * 40.0;
            map.setBearing(rotation % 360);

            window.requestAnimationFrame(frame);
        }

        window.requestAnimationFrame(frame);
    })();
</script>

</body>
</html>
